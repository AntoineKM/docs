---
title: Leap Payloads
description: Payloads sent to & from Leap Edge
---

# Payloads

We split payloads up into 2 categories: **Control** and **Service**. All payloads (from and to Leap Edge) must follow the Leap Edge encapsulating payload type:

### Encapsulating Payload Type

| field | type    | description  |
| ----- | ------- | ------------ |
| op    | integer | opcode       |
| d     | object  | message data |

**The payloads documented below are defining what goes inside the `d` (data) field.**

## Control

Payloads related to setting up & maintaining a connection with Leap Edge.

### Opcode 1: Hello

opcode: `1`  
direction: `rx`

Payload received from Leap Egde when connecting. This payload contains information needed for the client to set up and maintain a connection to Leap Edge.

| field              | type    | description                                                                    |
| ------------------ | ------- | ------------------------------------------------------------------------------ |
| heartbeat_interval | integer | the interval in milliseconds which the client should send heartbeat packets at |

### Opcode 2: Identify

opcode: `2`  
direction: `tx`

Client should send this after receiving Opcode 1: Hello. This should contain identifying information about the client, including the LE token.

| field | type   | description                |
| ----- | ------ | -------------------------- |
| token | string | the `leap_token_xxx` token |

### Opcode 3: Heartbeat

opcode: `3`  
direction: `both`

Client should send this every x milliseconds, a repeating interval defined in Opcode 1: Hello (heartbeat_interval). The repeating payload does not need a data field, however, the socket may send this opcode with a `tag` field to the client - if this is received, the client needs to immediately send this opcode back with the `tag` field in the data object.

| field | type    | description       |
| ----- | ------- | ----------------- |
| tag   | ?string | the heartbeat tag |

### Opcode 4: Heartbeat Ack

opcode: `4`  
direction: `rx`

Client will receive this opcode when any heartbeat is sent. If client was responding to a tagged heartbeat, then the `tag` field and an extra `latency` field will be included in the heartbeat acknowledgement.

| field   | type     | description           |
| ------- | -------- | --------------------- |
| tag     | ?string  | the heartbeat tag     |
| latency | ?integer | total round trip time |

## Service

Payloads for interacting with Hop realtime services through Leap Edge.
